language: php

matrix:
  include:
    - php: 7.0
      env:
        - LEGACY_DEPS="phpunit/phpunit=^7"
    - php: 7.1
      env:
        - LEGACY_DEPS="phpunit/phpunit=^7"
    - php: 7.2
    - php: 7.3
    - php: 7.4

before_script:
 - composer self-update
 - composer install --prefer-source --no-interaction --dev
 - if [[ $LEGACY_DEPS != '' ]]; then travis_retry composer update--with-dependencies $LEGACY_DEPS ; fi

script:
 - ./vendor/bin/phpunit --coverage-text

matrix:
 allow_failures:
  - php: hhvm
  - php: nightly
