language: php

before_script:
 - composer self-update
 - if [[ $LEGACY_DEPS != '' ]]; then travis_retry composer update--with-dependencies $LEGACY_DEPS ; fi
 - composer install --prefer-source --no-interaction --dev

script:
 - ./vendor/bin/phpunit --coverage-text

matrix:
 include:
  - php: 7.1
    env:
      - LEGACY_DEPS="phpunit/phpunit=^7"
  - php: 7.2
  - php: 7.3
  - php: 7.4

 allow_failures:
  - php: hhvm
  - php: nightly
